import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as c,c as M,w as r,o as g,a as u,h as d,f as o,t as s,d as x,n as y,e as b}from"./app-BWABJYdq.js";const L={props:{campaignAMetrics:{type:Object,default:()=>null},campaignBMetrics:{type:Object,default:()=>null},selectedCampaigns:{type:Array,required:!0}},data(){return{confidenceLevel:95,result:null}},computed:{campaignAValues(){var t,e,n,i;return{visitors:((e=(t=this.campaignAMetrics)==null?void 0:t.totals)==null?void 0:e.entries)||0,conversions:Math.round(((i=(n=this.campaignAMetrics)==null?void 0:n.totals)==null?void 0:i.leads)||0)}},campaignBValues(){var t,e,n,i;return{visitors:((e=(t=this.campaignBMetrics)==null?void 0:t.totals)==null?void 0:e.entries)||0,conversions:Math.round(((i=(n=this.campaignBMetrics)==null?void 0:n.totals)==null?void 0:i.leads)||0)}},campaignARate(){return this.campaignAValues.visitors?this.campaignAValues.conversions/this.campaignAValues.visitors*100:0},campaignBRate(){return this.campaignBValues.visitors?this.campaignBValues.conversions/this.campaignBValues.visitors*100:0}},methods:{calculateSignificance(){const t=this.campaignAValues.conversions/this.campaignAValues.visitors,e=this.campaignBValues.conversions/this.campaignBValues.visitors,n=Math.sqrt(t*(1-t)/this.campaignAValues.visitors),i=Math.sqrt(e*(1-e)/this.campaignBValues.visitors),l=Math.sqrt(n*n+i*i),a=Math.abs((t-e)/l),m=2*(1-this.normalCDF(a));this.result={zScore:a,pValue:m,isSignificant:m<1-this.confidenceLevel/100,improvement:e>t?(e-t)/t*100:(t-e)/e*100,winner:e>t?"B":"A"}},normalCDF(t){const e=1/(1+.2316419*Math.abs(t)),i=.3989423*Math.exp(-t*t/2)*e*(.3193815+e*(-.3565638+e*(1.781478+e*(-1.821256+e*1.330274))));return t>0?1-i:i},resetCalculator(){this.confidenceLevel=95,this.result=null}}},w={class:"mt-4"},F={class:"mt-3 d-flex gap-2"},k={key:0,class:"mt-4"},N={class:"mb-0"},R={class:"text-muted"};function q(t,e,n,i,l,a){const m=c("BCardTitle"),B=c("BCardHeader"),v=c("BFormSelect"),f=c("BFormGroup"),_=c("BCol"),h=c("BRow"),p=c("BButton"),C=c("BCardBody"),V=c("BCard");return g(),M(V,{"no-body":""},{default:r(()=>[u(B,null,{default:r(()=>[u(m,{class:"mb-0"},{default:r(()=>e[1]||(e[1]=[d("Lead Conversion Significance Test")])),_:1})]),_:1}),u(C,null,{default:r(()=>[u(h,null,{default:r(()=>[u(_,{md:"6"},{default:r(()=>[u(f,{label:"Confidence Level"},{default:r(()=>[u(v,{modelValue:l.confidenceLevel,"onUpdate:modelValue":e[0]||(e[0]=S=>l.confidenceLevel=S),options:[{value:90,text:"90%"},{value:95,text:"95%"},{value:99,text:"99%"}]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o("div",w,[o("h6",null,"Campaign A: "+s(n.selectedCampaigns[0]||"Not Selected"),1),o("p",null,s(a.campaignAValues.conversions.toLocaleString())+" leads from "+s(a.campaignAValues.visitors.toLocaleString())+" entries ("+s(a.campaignARate.toFixed(2))+"%) ",1),o("h6",null,"Campaign B: "+s(n.selectedCampaigns[1]||"Not Selected"),1),o("p",null,s(a.campaignBValues.conversions.toLocaleString())+" leads from "+s(a.campaignBValues.visitors.toLocaleString())+" entries ("+s(a.campaignBRate.toFixed(2))+"%) ",1)]),o("div",F,[u(p,{variant:"primary",onClick:a.calculateSignificance,disabled:!a.campaignAValues.visitors||!a.campaignBValues.visitors},{default:r(()=>e[2]||(e[2]=[d(" Calculate ")])),_:1},8,["onClick","disabled"]),u(p,{variant:"outline-secondary",onClick:a.resetCalculator},{default:r(()=>e[3]||(e[3]=[d(" Reset ")])),_:1},8,["onClick"])]),l.result?(g(),x("div",k,[o("div",{class:y(["alert",l.result.isSignificant?"alert-success":"alert-warning"])},[o("h5",null,s(l.result.isSignificant?"Statistically Significant!":"Not Statistically Significant"),1),o("p",N,[d(" Campaign "+s(l.result.winner)+" is "+s(l.result.improvement.toFixed(2))+"% "+s(l.result.winner==="B"?"better":"worse")+" with "+s((100*(1-l.result.pValue)).toFixed(2))+"% confidence. ",1),e[4]||(e[4]=o("br",null,null,-1)),o("small",R,"p-value: "+s(l.result.pValue.toExponential(3)),1)])],2)])):b("",!0)]),_:1})]),_:1})}const j=A(L,[["render",q]]);export{j as default};
